<html>
<head>
<meta charset="utf-8">
</head>

<body>

<div style="position:absolute; top:10px;left:30px;">

<p><b><font color=##084B8A face=arial size=4>Torpedos</font></b></p>

<font size=2 face=arial>

<p><font color=##084B8A face=arial size=2><b>Descripción:</b></font></p>

<p>El torpedo es un proyectil submarino autopropulsado durante toda su trayectoria, que puede contar con un elemento de guiado (sonar) que lo dirija hacia el blanco, y que al chocar contra el blanco explota.</p>

<p>El modelo de Torpedo es el encargado de simular las distintas fases de un torpedo lanzado.</p>

<p><font color=##084B8A face=arial size=2><b>Comprobaciones:</b></font></p>
 
<ul>
	<li>Comprobar que el tiempo transcurrido desde la creación del torpedo es inferior a su Tiempo de Vida definido en Preparación. Cuando el tiempo transcurrido alcanza este máximo sin haber hecho impacto, el torpedo es eliminado.</li>
</ul>

<p><font color=##084B8A face=arial size=2><b>Evaluación:</b></font></p>

<p>A continuación se describe la simulación de las distintas fases de un torpedo lanzado:</p>

<p><b>Fase de Lanzamiento:</b></p>

<p>Según el tipo de torpedo:</p>

<ul>
	<p><b>ASROC:</b></p>

	<p>El torpedo realiza un tiro parabólico con un ángulo de lanzamiento configurable en <b>Galeon.ini</b>, y la velocidad inicial necesaria para alcanzar el punto de entrada en el agua.</p>

	<p>Este punto se calcula teniendo en cuenta el Tiempo de Vuelo a la posición actual del blanco seleccionado y calculando la posición futura del blanco transcurrido este tiempo. Se tiene en cuenta el viento (compensándolo). El lanzamiento se realiza a la posición calculada, con la velocidad de lanzamiento necesaria.</p>

	<p>Esta velocidad se calcula como:</p>

	<ul>
		<p><font size=2 face=courier>Velocidad = sqrt ( g * distancia al punto entrada / sen (2 * ángulo de lanzamiento) )</font></p>
	</ul>

	<p>Si se alcanza la superficie del agua:</p>

	<ul>
		<p><font size=2 face=courier>
		AnguloDescenso = 90 <br>
		VelZ = VelDescenso <br>
		TiempoVida = 0 <br>
		</font></p>
	</ul>

	<p>Si el torpedo está descendiendo dentro del agua, actualiza la profundidad:</p>

	<ul>
		<p><font size=2 face=courier>CoordZ = CoordZ + VelZ * IncreTiempo</font></p>
	</ul>

	<p>Si se alcanza la profundidad de búsqueda (SD):</p>

	<ul>
		<p><font size=2 face=courier>
		AnguloDescenso = 0 <br>
		VelHorizontal = VelocidadCrucero (Baja) <br>
		VelZ = 0 <br>
		</font></p>
	</ul>

	<p><b>Convencional (Superficie o Submarino):</b></p>

	<p>Si el torpedo es filoguiado, el rumbo con el que sale el torpedo es la demora al contacto.</p>

	<p>Si el torpedo no es filoguiado, el rumbo con el que sale el torpedo es el rumbo del buque mas el ángulo de Orientación del Tubo (signo positivo si lanzamiento estribor, signo negativo si lanzamiento babor, ver selección banda lanzamiento en el MMI), más el ángulo de giróscopo seleccionado (sumado con su signo) y la velocidad horizontal es la velocidad de lanzamiento de la base de datos.</p>
	
	<ul>
		<p><font size=2 face=courier>VelZ< = Velocidad de Descenso</font> dentro del agua de la base de datos</p>
	</ul>

	<p>Se actualiza la profundidad:</p>

	<ul>
		<p><font size=2 face=courier>
		CoordX = CoordX + (VelX + VelCorrienteX) * IncreTiempo <br>
		CoordY = CoordY + (VelY + VelCorrienteY) * IncreTiempo <br>
		CoordZ = CoordZ + VelZ * IncreTiempo <br>
		</font></p>
	</ul>

	<p>Si se alcanza la profundidad de búsqueda (SD):</p>

	<ul>
		<p><font size=2 face=courier>
		AnguloDescenso = 0 <br>
		VelHorizontal = VelocidadCrucero (Baja) <br>
		VelZ = 0 <br>
		</font></p>
	</ul>

	<p><b>Aéreo</b></p>

	<p>La velocidad horizontal y el rumbo de lanzamiento será la de la unidad lanzadora en el momento del lanzamiento.</p>

	<p>Si el torpedo está todavía en caída libre, actualiza la posición y la altura:</p>

	<ul>
		<p><font size=2 face=courier>
		CoordX = CoordX + (VelX + VelVientoX) * IncreTiempo <br>
		CoordY = CoordY + (VelY + VelVientoY) * IncreTiempo <br>
		CoordZ = CoordLanzZ - 0.5 * Gravedad * TiempoVida2 <br>
		</font></p>
	</ul>

	<p>Si se alcanza la superficie del agua:</p>

	<ul>
		<p><font size=2 face=courier>
		AnguloDescenso = 90 <br>
		VelZ = VelDescenso <br>
		TiempoVida = 0 <br>
		</font></p>
	</ul>	

	<p>Si el torpedo está descendiendo dentro del agua, actualiza la profundidad:</p>

	<ul>
		<p><font size=2 face=courier>CoordZ = CoordZ + VelZ * IncreTiempo</font></p>
	</ul>

	<p>Si se alcanza la profundidad de búsqueda (SD):</p>

	<ul>
		<p><font size=2 face=courier>
		AnguloDescenso = 0 <br>
		VelHorizontal = VelocidadCrucero (Baja) <br>
		VelZ = 0 <br>
		</font></p>
	</ul>	

</ul>

<p><b>Fase de Crucero (fase muerta):</b></p>

<p>La velocidad será la velocidad de crucero cargada en preparación (BAJA) y si es filoguiado, el rumbo será el determinado por la demora del blanco en cada momento y si no es filoguiado, el rumbo será el rumbo calculado durante el disparo.</p>

<p>Actualiza la posición</p>

<ul>
	<p><font size=2 face=courier>
	CoordX = CoordX + (VelX + VelCorrienteX) * IncreTiempo <br>
	CoordY = CoordY + (VelY + VelCorrienteY) * IncreTiempo <br>
	</font></p>
</ul>	

<p>Transcurrido el tiempo de activación el torpedo, si el torpedo es ASuW cambia su profundidad hasta la de búsqueda (SD), teniendo en cuenta el régimen de variación angular definido en base de datos.</p>

<p>Si se alcanza la profundidad de búsqueda (SD) , pasa a la fase de Búsqueda.</p>

<p><b>Fase de Búsqueda:</b></p>

<p>Durante esta fase el torpedo encenderá sus sensores (Sonar activo y pasivo), abandonando esta fase y entrando en la de seguimiento, cuando se detecte un contacto en cualquiera de los dos sonares. Esta fase depende del tipo de patrón de búsqueda que lleve el torpedo.</p>

<p>Los Torpedos tienen un cono de búsqueda definido en BD, cualquier detección que se salga de este cono no deberá ser considerada. Por tanto, se filtran las detecciones procedentes del sonar teniendo en cuenta el ángulo, en horizontal y vertical, que forma la detección con el torpedo. Se tiene en cuenta la inclinación del torpedo a la hora de calcular el ángulo vertical que existe entre el torpedo y la detección.</p>

<p>Si se detectan varios contactos con el sonar activo, se elige el de mayor exceso de señal. Si no se detecta ningún contacto con el activo y sí con el pasivo se selecciona una detección del pasivo con el mismo criterio.</p>

<p>Para torpedos Filoguiados cuando el torpedo detecta un blanco, comprueba que no es un productor de ruido, y si no lo es, pasará a fase de seguimiento. En caso de que el blanco sea un productor de ruido, la probabilidad de que el torpedo evite el engaño y busque otro blanco, será la especificada en <b>Galeon.ini</b>.</p>

<p>En el lanzamiento de los torpedos se considerará la DOG‑BOX o zona en la que el arma puede recibir interferencias o adquirir unidades amigas, que abarcará un radio definido en Base de Datos, centrado en la posición del torpedo.</p>

<p><b>Algoritmo de Búsqueda de un Torpedo:</b></p>

<p>Según el tipo de carrera del Torpedo se actualizarán las coordenadas x, y, z de la siguiente forma:</p>

<ul>
	<p><b>Recto</b></p>

	<p>El Angulo de Descenso se anula y se actualiza la Posición:</p>

	<ul>
		<p><font size=2 face=courier>
		CoordX = CoordX + (VelX + VelCorrienteX) * IncreTiempo <br>
		CoordY = CoordY + (VelY + VelCorrienteY) * IncreTiempo <br>
		</font></p>
	</ul>

	<p><b>Autoguía</b></p>

	<p>El Angulo de Descenso se anula y se actualiza la Posición:</p>

	<ul>
		<p><font size=2 face=courier>
		CoordX = CoordX + (VelX + VelCorrienteX) * IncreTiempo <br>
		CoordY = CoordY + (VelY + VelCorrienteY) * IncreTiempo <br>
		</font></p>
	</ul>

	<p>El torpedo tomará la dirección del Blanco detectado por el sonar del torpedo.</p>

	<p>Si la distancia recorrida desde el lanzamiento es mayor que la longitud del cable, o el buque navega a una velocidad mayor que la velocidad máxima, se simulará que se rompe la guía y el torpedo entra fase de búsqueda circular.</p>

	<p><b>Circular</b></p>

	<p>El modelo calcula las coordenadas del centro de giro utilizando la siguiente fórmula:</p>

	<ul>
		<p><font size=2 face=courier>
		CentroX = CoordX + Dirección * RadioCirculo * cos (Rumbo) <br>
		CentroY = CoordY - Dirección * RadioCirculo * sen (Rumbo) <br>
		siendo Dirección = 1 para el sentido de giro horario y -1 para1 el antihorario. <br>
		</font></p>
	</ul>

	<p>Calcula la razón de giro como:</p>

	<ul>
		<p><font size=2 face=courier>RazonGiro = (Velocidad / RadioCirculo) * RadianesAGrados</font></p>
	</ul>

	<p>Se actualiza el rumbo con la fórmula siguiente:</p>

	<ul>
		<p><font size=2 face=courier>Rumbo = Rumbo + Dirección * RazonGiro * IncreTiempo</font></p>
	</ul>

	<p>Actualiza la posición del torpedo como:</p>

	<ul>
		<p><font size=2 face=courier>
		CoordX = CentroX - Dirección * RadioCirculo * cos (Rumbo) <br>
		CoordY = CentroY + Dirección * RadioCirculo * sin (Rumbo) <br>
		</font></p>
	</ul>

	<p>Si la velocidad de ascenso/descenso es mayor que 0 entonces:</p>

	<p>Calcular el ángulo de ascenso/descenso según la fórmula:</p>

	<ul>
		<p><font size=2 face=courier>AngDescenso = ± arctan (VelAscensoHelic / Velocidad)</font></p>
	</ul>

	<p>Actualizar la profundidad del torpedo</p>

	<ul>
		<p><font size=2 face=courier>CoordZ = CoordZ+IndicadorAscDesc * VelAscensoHelic * IncreTiempo</font></p>
	</ul>

	<p>Si se alcanza la profundidad techo o piso de búsqueda, se modifica el indicador para invertir el sentido de ascenso/descenso</p>

	<p><b>Serpenteo (o HATS)</b></p>

	<p>Calcula el rumbo a alcanzar para describir el zig zag</p>

	<ul>
		<p><font size=2 face=courier>NuevoRumbo = Rumbo + Dirección * AnguloZigZag</font><br>
		siendo Dirección = 1 si el zig zag va de derecha a izquierda y -1 si va de izquierda a derecha<br>
		</p>
	</ul>

	<p>Calcula el tiempo para recorrer cada tramo con la fórmula:</p>

	<ul>
		<p><font size=2 face=courier>TiempoTotal = LongitudTramo / Velocidad</font></p>
	</ul>

	<p>Inicializa la variable de tiempo actual en zigzag como:</p>

	<ul>
		<p><font size=2 face=courier>TiempoActual = (TiempoTotal + AngZigZag / VariacionAngHor) / 2</font></p>
	</ul>

	<p>Calcula el tiempo que lleva describiendo este tramo según la fórmula:</p>

	<ul>
		<p><font size=2 face=courier>TiempoActual = TiempoActual + IncreTiempo</font></p>
	</ul>

	<p>Si sobrepasa el tiempo total en cada tramo, cambia la dirección, y calcula el rumbo que debe alcanzar el torpedo para describir el otro tramo del zig zag.</p>

	<ul>
		<p><font size=2 face=courier>NuevoRumbo = NuevoRumbo + Dirección * 2 * AngZigZag</font></p>
	</ul>

	<p>Actualiza la posición del torpedo</p>

	<ul>
		<p><font size=2 face=courier>
		CoordX = CoordX + (VelX + VelCorrienteX) * IncreTiempo <br>
		CoordY = CoordY + (VelY + VelCorrienteY) * IncreTiempo <br>
		</font></p>
	</ul>

	<p>Cuando el torpedo recorre la Distancia de Serpenteo introducida en la Base de Datos del Torpedo, cambia a patrón de búsqueda horizontal.</p>

	<p><b>Seguidores de Estela:</b></p>

	<p>Se considera que las unidades de superficie y los submarinos en superficie dejan una estela. La estela se simula como una polilínea constituida por todos los puntos por los que pasó la unidad en los últimos 15 minutos (configurable en <b>Galeon.ini</b>.</p>

	<p>Si el torpedo corta la estela, pasa a profundidad de seguimiento de estela y cae a la banda para la cual se acerca al buque, hasta volver a cortar la estela. A partir de entonces continúa con una carrera serpenteo a banda y banda de la estela del buque.</p>

	<p>Si el torpedo pasa por debajo del buque, hará impacto.</p>

	<p>Si el torpedo pierde la estela por adelantar al buque, o por cambio brusco de rumbo mientras serpenteaba a la banda contraria, comenzará una búsqueda circular hasta volver a cortar una estela, momento en que repetirá la lógica de seguimiento de estela.</p>

</ul>

<p><b>Fase de Seguimiento:</b></p>

<p>Si se encuentra en fase de seguimiento se realizará la evaluación según los modelos de sonar activo y pasivo introducidos en Base de Datos para el torpedo. El torpedo automáticamente tomará la dirección del Blanco detectado según dichos modelos, con la Velocidad de Crucero en Alta, especificada en la Base de Datos. Si se deja de detectar el blanco en seguimiento por ambos sonares, pasará de nuevo a la fase de búsqueda con patrón de búsqueda circular.</p>

<p>Para torpedos Filoguiados el torpedo automáticamente tomará la dirección del Blanco detectado y en caso de perder la detección, cortará la filoguía y pasará a Fase de Búsqueda de tipo Circular.</p>

<p>Para determinar si el torpedo ha sobrepasado al blanco se calcula la demora y distancia entre el torpedo y el blanco. El torpedo se considera que sobrepasa la posición del blanco, si se encuentra a una distancia menor que la que recorre en un segundo y la demora relativa entre ambos esta cercana a los 180 grados.</p>

<ul>
	<p><font size=2 face=courier>
	distancia <= 2 * velocidad_torpedo * incre_tiempo <br>
	demora>=90 y demora<=270 <br>
	</font></p>
</ul>

<p>Cuando se produce esta condición, si el blanco es un productor de ruido, se pasa de nuevo a la fase de búsqueda, y en caso contrario, pasará a la fase de impacto.</p>

<p><b>Fase de Impacto:</b></p>

<p>Se determina la probabilidad de impacto, para lo que se tendrá en cuenta si existen burbujas lanzadas por el blanco</p>

<ul>
	<p><font size=2 face=courier>probabilidad_impacto= capacidad_discriminación * probabilidad_impacto</font></p>
</ul>

<p>Si se produce el impacto, el torpedo será eliminado del juego y se evaluarán los daños en el blanco, creando el Informe de daños respectivo. En caso contrario, el torpedo seguirá su trayectoria hasta el final de su tiempo de vida.</p>

<p>En el momento de la explosión se produce una señal acústica en banda ancha, cuyo nivel de salida en decibelios es la mitad de la carga explosiva en kgs. Esta señal acústica durará 5 seg y será recibida por los sonares pasivos que estén dentro del alcance que le proporcione la traza batitérmica y su nivel de salida. La detección correspondiente será identificada como EXPLOSIÓN.</p>

</div>

</body>

</html>
